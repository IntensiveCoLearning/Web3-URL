# Web3 URL æ®‹é…·å…±å­¦ç¬¬ 1 æœŸæ®‹é…·æŒ‡å¼•

> âš ï¸ æ­£å¼å¼€å§‹å‰è¯·ç¡®ä¿ä½ åœ¨èº«ä½“ä¸Šå’Œç²¾ç¥ä¸Šéƒ½å¤„äºåˆé€‚çš„çŠ¶æ€ï¼Œè¯·åˆ»æ„ç»ƒä¹ ï¼Œæ®‹é…·é¢å¯¹ ğŸ†’ã€‚ä¸ºæ–¹ä¾¿æ£€ç´¢ The First Web3 URL Intensive CoLearning ç®€å†™ä¸º WICL1stï¼Œç¬¬ 2 æœŸå³ä¸ºWICL2ndï¼Œç¬¬ 3 æœŸå³ä¸º WICL3rdï¼Œä»¥æ­¤ç±»æ¨ã€‚

> âš ï¸ æŠ¥åéœ€è¦æŒ‰è¦æ±‚è®¤çœŸå¡«å†™ä¸‹é¢ [ XXX ] éƒ¨åˆ†ï¼Œæ–¹å¯é€šè¿‡æŠ¥åå®¡æ ¸ï¼Œé€šè¿‡å®¡æ ¸å³å¯å¼€å§‹è‡ªä¸»å­¦ä¹ ã€‚

---

# [ ä½ çš„åå­— ]

1. **è‡ªæˆ‘ä»‹ç»ï¼š**

   æˆ‘æ˜¯k1one,åœ¨è¯»å¤§äºŒå­¦ç”Ÿï¼Œç›®å‰ç†Ÿæ‚‰solidity,å¸Œæœ›èƒ½åœ¨å­¦ä¹ ä¸­æå‡è‡ªå·±ï¼Œæ‰¾åˆ°è‡ªå·±çš„idea

2. **ç»„é˜ŸæœŸå¾…ï¼š**

   å¸Œæœ›è®¤è¯†å¿—åŒé“åˆçš„å°ä¼™ä¼´ï¼Œæ‰¾åˆ°å¥‡å¦™çš„idea

3. **ä½ è®¤ä¸ºä½ ä¼šå®Œæˆæœ¬æ¬¡ Web3 URL çš„æ®‹é…·å­¦ä¹ å—ï¼Ÿ**

   Yes 95%

---

## ç¬¬ 1 æœŸå…±å­¦æ—¶é—´è®¡åˆ’

- **7 æœˆ 8 æ—¥ - 7 æœˆ 14 æ—¥**ï¼š

  - è‡ªæˆ‘ä»‹ç»ï¼šå¤§å®¶æŒ‰è¦æ±‚æ›´æ–°ä¸Šæ–¹è‡ªæˆ‘ä»‹ç»ï¼Œæ–¹é¢å¤§å®¶äº’ç›¸äº†è§£ï¼ŒåŠåç»­è‡ªç”±ç»„é˜Ÿæ–¹å‘ã€‚

  - [Web3 URL æ®‹é…·å…±å­¦é¢‘é“](https://t.me/LXDAO/8748)æŠ¥é“ï¼šå¤§å®¶å¯ä»¥è‡ªç”±åœ¨æ®‹é…·å…±å­¦ç¾¤é‡Œäº¤æµåˆ†äº«ï¼Œäº’åŠ¨ç­”ç–‘ï¼Œæ ¹æ®è‡ªèº«å­¦ä¹ é˜¶æ®µæƒ…å†µéšæ—¶å¼€å¯è‡ªç”±ç»„é˜Ÿã€‚

  - è¯¾å‰å­¦ä¹ ï¼šäº†è§£æ®‹é…·å…±å­¦æµç¨‹ï¼ŒGitHub åä½œå…±å­¦åŸºç¡€ï¼›Web3:// åè®®è¯¾å‰å­¦ä¹ ã€‚

- **7 æœˆ 15 æ—¥ - 7 æœˆ 21 æ—¥**ï¼š

  - **7 æœˆ 15 æ—¥ å‘¨ä¸€æ™š 8 ç‚¹- 9 ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰ï¼š** ç¬¬ 1 æ¬¡å…¬å¼€è¯¾åˆ†äº«
  - **æœ¬å‘¨å…±å­¦å†…å®¹ï¼š** æ¶‰åŠ Web3://  çš„èƒŒæ™¯å’Œæ¼”è¿›å†å²ï¼›æ”¯æŒ Web3://  åè®®çš„è®¿é—®æ–¹å¼ (gateway å’Œ EVM browser)æ¥æµè§ˆä»¥å¤ªåŠä¸Šé¢çš„æ•°æ®ï¼›ç†Ÿæ‚‰ä½¿ç”¨ Web3://  å’Œ EthStorage æ—©æœŸæµ‹è¯•ç½‘æ¥éƒ¨ç½²ç®€å•çš„å»ä¸­å¿ƒåŒ–ç½‘ç«™ã€‚
  - **Homework1ï¼š** è§[è¯¾ç¨‹ PPT](https://docs.google.com/presentation/d/1egJUKJrjC9wjkmOF9sLBkTSwHpd6hl8FXkWehPW7kFk/edit#slide=id.g1754f50a55c_0_11)ã€‚

- **7 æœˆ 22 æ—¥ - 7 æœˆ 28 æ—¥**
  - **7 æœˆ 22 æ—¥ å‘¨ä¸€æ™š 8 ç‚¹- 9 ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰ï¼š** ç¬¬ 2 æ¬¡å…¬å¼€è¯¾åˆ†äº«

  - **æœ¬å‘¨å…±å­¦å†…å®¹ï¼š** æ¶‰åŠ Web3://  é«˜çº§å¼€å‘å·¥å…·ï¼ŒåŒ…æ‹¬ï¼šåœ¨å‘½ä»¤è¡Œé€šè¿‡ web3curl æ¥é€šè¿‡ Web3://  åè®®ä¸‹è½½æ•°æ®ï¼Œé€šè¿‡ ethfs-uploader æ‰¹é‡ä¸Šä¼ ç½‘é¡µæ•°æ®ï¼Œé€šè¿‡ manual æ¨¡å¼æ¥æ­å»ºå»ä¸­å¿ƒåŒ–å¤šäººäº¤äº’å…¨é“¾ç½‘ç«™ï¼›åŠæ·±å…¥ç†è§£ä»¥å¤ªåŠçš„å­˜å‚¨æ¨¡å‹å’Œ gas å¼€é”€ç­‰ã€‚
  - **è¾¹å­¦è¾¹ç”¨å®æˆ˜å¼€å‘ï¼š** æ ¹æ®ç»„é˜Ÿæƒ…å†µè‡ªç”±å®‰æ’ã€‚
  - **Homework2ï¼š** è§[è¯¾ç¨‹ PPT](https://docs.google.com/presentation/d/1egJUKJrjC9wjkmOF9sLBkTSwHpd6hl8FXkWehPW7kFk/edit#slide=id.g1754f50a55c_0_11)ã€‚

- **7 æœˆ 29 æ—¥ - 8 æœˆ 4 æ—¥**
  - **7 æœˆ 29 æ—¥ å‘¨ä¸€æ™š 8 ç‚¹- 9 ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰ï¼š** ç¬¬ 3 æ¬¡å…¬å¼€è¯¾åˆ†äº«
  - **æœ¬å‘¨å…±å­¦å†…å®¹ï¼š** æ¶‰åŠå®é™…åº”ç”¨æ¡ˆä¾‹åˆ†äº«åŠæœªæ¥ä»¥å¤ªåŠåŸºç¡€è®¾æ–½åœ¨ Web3://  çš„é‡è¦ä½œç”¨åŠå¼€å‘æ–¹å‘ç­‰ã€‚
  - **è¾¹å­¦è¾¹ç”¨å®æˆ˜å¼€å‘ï¼š** æ ¹æ®ç»„é˜Ÿæƒ…å†µè‡ªç”±å®‰æ’ã€‚
  - **ç»“è¥åˆ†äº«ï¼š** å…·ä½“æ—¶é—´åŠè¯¦æƒ…å¦åœ¨ã€ŒWeb3 URL æ®‹é…·å…±å­¦é¢‘é“ã€é€šçŸ¥ã€‚

---

## ç¬”è®°è¯æ˜ Notes Proof
<!-- Content_START --> 
### 07.15

- ä»Šæ—¥å­¦ä¹ æ—¶é—´ï¼š1h
- å­¦ä¹ å†…å®¹å°ç»“ï¼šå­¦ä¹ web3 url å’Œ åŸºç¡€çš„ä¸šåŠ¡åœºæ™¯
- Homework éƒ¨åˆ†ï¼ˆå¦‚æœæœ‰å®‰æ’éœ€è¦å¡«å†™è¯æ˜å®Œæˆï¼‰
- Question and Ideasï¼ˆæœ‰ä»€ä¹ˆç–‘é—®/æˆ–è€…æƒ³æ³•ï¼Œå¯ä»¥è®°åœ¨è¿™é‡Œï¼Œä¹Ÿå¯ä»¥åˆ†äº«åˆ°å…±å­¦é¢‘é“ç¾¤è®¨è®ºäº¤æµï¼‰



### 07.16

å­¦ä¹ æ—¶é—´ï¼š1h

å­¦ä¹ å†…å®¹å°ç»“ï¼šå­¦ä¹ solidityçš„åˆ†è´¦

åˆ†è´¦åˆçº¦(`PaymentSplit`)å…·æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š

1. åœ¨åˆ›å»ºåˆçº¦æ—¶å®šå¥½åˆ†è´¦å—ç›Šäºº`payees`å’Œæ¯äººçš„ä»½é¢`shares`ã€‚
2. ä»½é¢å¯ä»¥æ˜¯ç›¸ç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ä»»æ„æ¯”ä¾‹ã€‚
3. åœ¨è¯¥åˆçº¦æ”¶åˆ°çš„æ‰€æœ‰`ETH`ä¸­ï¼Œæ¯ä¸ªå—ç›Šäººå°†èƒ½å¤Ÿæå–ä¸å…¶åˆ†é…çš„ä»½é¢æˆæ¯”ä¾‹çš„é‡‘é¢ã€‚
4. åˆ†è´¦åˆçº¦éµå¾ª`Pull Payment`æ¨¡å¼ï¼Œä»˜æ¬¾ä¸ä¼šè‡ªåŠ¨è½¬å…¥è´¦æˆ·ï¼Œè€Œæ˜¯ä¿å­˜åœ¨æ­¤åˆçº¦ä¸­ã€‚å—ç›Šäººé€šè¿‡è°ƒç”¨`release()`å‡½æ•°è§¦å‘å®é™…è½¬è´¦ã€‚

```
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.21;

/**
 * åˆ†è´¦åˆçº¦ 
 * @dev è¿™ä¸ªåˆçº¦ä¼šæŠŠæ”¶åˆ°çš„ETHæŒ‰äº‹å…ˆå®šå¥½çš„ä»½é¢åˆ†ç»™å‡ ä¸ªè´¦æˆ·ã€‚æ”¶åˆ°ETHä¼šå­˜åœ¨åˆ†è´¦åˆçº¦ä¸­ï¼Œéœ€è¦æ¯ä¸ªå—ç›Šäººè°ƒç”¨release()å‡½æ•°æ¥é¢†å–ã€‚
 */
contract PaymentSplit{
```

åˆ†è´¦åˆçº¦ä¸­å…±æœ‰`3`ä¸ªäº‹ä»¶ï¼š

- `PayeeAdded`ï¼šå¢åŠ å—ç›Šäººäº‹ä»¶ã€‚

- `PaymentReleased`ï¼šå—ç›Šäººææ¬¾äº‹ä»¶ã€‚

- `PaymentReceived`ï¼šåˆ†è´¦åˆçº¦æ”¶æ¬¾äº‹ä»¶ã€‚

  ```
      // äº‹ä»¶
      event PayeeAdded(address account, uint256 shares); // å¢åŠ å—ç›Šäººäº‹ä»¶
      event PaymentReleased(address to, uint256 amount); // å—ç›Šäººææ¬¾äº‹ä»¶
      event PaymentReceived(address from, uint256 amount); // åˆçº¦æ”¶æ¬¾äº‹ä»¶
  ```

  åˆ†è´¦åˆçº¦ä¸­å…±æœ‰`5`ä¸ªçŠ¶æ€å˜é‡ï¼Œç”¨æ¥è®°å½•å—ç›Šåœ°å€ã€ä»½é¢ã€æ”¯ä»˜å‡ºå»çš„`ETH`ç­‰å˜é‡ï¼š

  - `totalShares`ï¼šæ€»ä»½é¢ï¼Œä¸º`shares`çš„å’Œã€‚
  - `totalReleased`ï¼šä»åˆ†è´¦åˆçº¦å‘å—ç›Šäººæ”¯ä»˜å‡ºå»çš„`ETH`ï¼Œä¸º`released`çš„å’Œã€‚
  - `payees`ï¼š`address`æ•°ç»„ï¼Œè®°å½•å—ç›Šäººåœ°å€
  - `shares`ï¼š`address`åˆ°`uint256`çš„æ˜ å°„ï¼Œè®°å½•æ¯ä¸ªå—ç›Šäººçš„ä»½é¢ã€‚
  - `released`ï¼š`address`åˆ°`uint256`çš„æ˜ å°„ï¼Œè®°å½•åˆ†è´¦åˆçº¦æ”¯ä»˜ç»™æ¯ä¸ªå—ç›Šäººçš„é‡‘é¢ã€‚

  ```
      uint256 public totalShares; // æ€»ä»½é¢
      uint256 public totalReleased; // æ€»æ”¯ä»˜

      mapping(address => uint256) public shares; // æ¯ä¸ªå—ç›Šäººçš„ä»½é¢
      mapping(address => uint256) public released; // æ”¯ä»˜ç»™æ¯ä¸ªå—ç›Šäººçš„é‡‘é¢
      address[] public payees; // å—ç›Šäººæ•°ç»„
  ```

åˆ†è´¦åˆçº¦ä¸­å…±æœ‰`6`ä¸ªå‡½æ•°ï¼š

- æ„é€ å‡½æ•°ï¼šå§‹åŒ–å—ç›Šäººæ•°ç»„`_payees`å’Œåˆ†è´¦ä»½é¢æ•°ç»„`_shares`ï¼Œå…¶ä¸­æ•°ç»„é•¿åº¦ä¸èƒ½ä¸º0ï¼Œä¸¤ä¸ªæ•°ç»„é•¿åº¦è¦ç›¸ç­‰ã€‚_sharesä¸­å…ƒç´ è¦å¤§äº0ï¼Œ_payeesä¸­åœ°å€ä¸èƒ½ä¸º0åœ°å€ä¸”ä¸èƒ½æœ‰é‡å¤åœ°å€ã€‚
- `receive()`ï¼šå›è°ƒå‡½æ•°ï¼Œåœ¨åˆ†è´¦åˆçº¦æ”¶åˆ°`ETH`æ—¶é‡Šæ”¾`PaymentReceived`äº‹ä»¶ã€‚
- `release()`ï¼šåˆ†è´¦å‡½æ•°ï¼Œä¸ºæœ‰æ•ˆå—ç›Šäººåœ°å€`_account`åˆ†é…ç›¸åº”çš„`ETH`ã€‚ä»»ä½•äººéƒ½å¯ä»¥è§¦å‘è¿™ä¸ªå‡½æ•°ï¼Œä½†`ETH`ä¼šè½¬ç»™å—ç›Šäººåœ°å€`account`ã€‚è°ƒç”¨äº†releasable()å‡½æ•°ã€‚
- `releasable()`ï¼šè®¡ç®—ä¸€ä¸ªå—ç›Šäººåœ°å€åº”é¢†å–çš„`ETH`ã€‚è°ƒç”¨äº†`pendingPayment()`å‡½æ•°ã€‚
- `pendingPayment()`ï¼šæ ¹æ®å—ç›Šäººåœ°å€`_account`, åˆ†è´¦åˆçº¦æ€»æ”¶å…¥`_totalReceived`å’Œè¯¥åœ°å€å·²é¢†å–çš„é’±`_alreadyReleased`ï¼Œè®¡ç®—è¯¥å—ç›Šäººç°åœ¨åº”åˆ†çš„`ETH`ã€‚
- `_addPayee()`ï¼šæ–°å¢å—ç›Šäººå‡½æ•°åŠå…¶ä»½é¢å‡½æ•°ã€‚åœ¨åˆçº¦åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ï¼Œä¹‹åä¸èƒ½ä¿®æ”¹ã€‚

```
    /**
     * @dev åˆå§‹åŒ–å—ç›Šäººæ•°ç»„_payeeså’Œåˆ†è´¦ä»½é¢æ•°ç»„_shares
     * æ•°ç»„é•¿åº¦ä¸èƒ½ä¸º0ï¼Œä¸¤ä¸ªæ•°ç»„é•¿åº¦è¦ç›¸ç­‰ã€‚_sharesä¸­å…ƒç´ è¦å¤§äº0ï¼Œ_payeesä¸­åœ°å€ä¸èƒ½ä¸º0åœ°å€ä¸”ä¸èƒ½æœ‰é‡å¤åœ°å€
     */
    constructor(address[] memory _payees, uint256[] memory _shares) payable {
        // æ£€æŸ¥_payeeså’Œ_sharesæ•°ç»„é•¿åº¦ç›¸åŒï¼Œä¸”ä¸ä¸º0
        require(_payees.length == _shares.length, "PaymentSplitter: payees and shares length mismatch");
        require(_payees.length > 0, "PaymentSplitter: no payees");
        // è°ƒç”¨_addPayeeï¼Œæ›´æ–°å—ç›Šäººåœ°å€payeesã€å—ç›Šäººä»½é¢shareså’Œæ€»ä»½é¢totalShares
        for (uint256 i = 0; i < _payees.length; i++) {
            _addPayee(_payees[i], _shares[i]);
        }
    }

    /**
     * @dev å›è°ƒå‡½æ•°ï¼Œæ”¶åˆ°ETHé‡Šæ”¾PaymentReceivedäº‹ä»¶
     */
    receive() external payable virtual {
        emit PaymentReceived(msg.sender, msg.value);
    }

    /**
     * @dev ä¸ºæœ‰æ•ˆå—ç›Šäººåœ°å€_accountåˆ†å¸ï¼Œç›¸åº”çš„ETHç›´æ¥å‘é€åˆ°å—ç›Šäººåœ°å€ã€‚ä»»ä½•äººéƒ½å¯ä»¥è§¦å‘è¿™ä¸ªå‡½æ•°ï¼Œä½†é’±ä¼šæ‰“ç»™accountåœ°å€ã€‚
     * è°ƒç”¨äº†releasable()å‡½æ•°ã€‚
     */
    function release(address payable _account) public virtual {
        // accountå¿…é¡»æ˜¯æœ‰æ•ˆå—ç›Šäºº
        require(shares[_account] > 0, "PaymentSplitter: account has no shares");
        // è®¡ç®—accountåº”å¾—çš„eth
        uint256 payment = releasable(_account);
        // åº”å¾—çš„ethä¸èƒ½ä¸º0
        require(payment != 0, "PaymentSplitter: account is not due payment");
        // æ›´æ–°æ€»æ”¯ä»˜totalReleasedå’Œæ”¯ä»˜ç»™æ¯ä¸ªå—ç›Šäººçš„é‡‘é¢released
        totalReleased += payment;
        released[_account] += payment;
        // è½¬è´¦
        _account.transfer(payment);
        emit PaymentReleased(_account, payment);
    }

    /**
     * @dev è®¡ç®—ä¸€ä¸ªè´¦æˆ·èƒ½å¤Ÿé¢†å–çš„ethã€‚
     * è°ƒç”¨äº†pendingPayment()å‡½æ•°ã€‚
     */
    function releasable(address _account) public view returns (uint256) {
        // è®¡ç®—åˆ†è´¦åˆçº¦æ€»æ”¶å…¥totalReceived
        uint256 totalReceived = address(this).balance + totalReleased;
        // è°ƒç”¨_pendingPaymentè®¡ç®—accountåº”å¾—çš„ETH
        return pendingPayment(_account, totalReceived, released[_account]);
    }

    /**
     * @dev æ ¹æ®å—ç›Šäººåœ°å€`_account`, åˆ†è´¦åˆçº¦æ€»æ”¶å…¥`_totalReceived`å’Œè¯¥åœ°å€å·²é¢†å–çš„é’±`_alreadyReleased`ï¼Œè®¡ç®—è¯¥å—ç›Šäººç°åœ¨åº”åˆ†çš„`ETH`ã€‚
     */
    function pendingPayment(
        address _account,
        uint256 _totalReceived,
        uint256 _alreadyReleased
    ) public view returns (uint256) {
        // accountåº”å¾—çš„ETH = æ€»åº”å¾—ETH - å·²é¢†åˆ°çš„ETH
        return (_totalReceived * shares[_account]) / totalShares - _alreadyReleased;
    }

    /**
     * @dev æ–°å¢å—ç›Šäºº_accountä»¥åŠå¯¹åº”çš„ä»½é¢_accountSharesã€‚åªèƒ½åœ¨æ„é€ å™¨ä¸­è¢«è°ƒç”¨ï¼Œä¸èƒ½ä¿®æ”¹ã€‚
     */
    function _addPayee(address _account, uint256 _accountShares) private {
        // æ£€æŸ¥_accountä¸ä¸º0åœ°å€
        require(_account != address(0), "PaymentSplitter: account is the zero address");
        // æ£€æŸ¥_accountSharesä¸ä¸º0
        require(_accountShares > 0, "PaymentSplitter: shares are 0");
        // æ£€æŸ¥_accountä¸é‡å¤
        require(shares[_account] == 0, "PaymentSplitter: account already has shares");
        // æ›´æ–°payeesï¼Œshareså’ŒtotalShares
        payees.push(_account);
        shares[_account] = _accountShares;
        totalShares += _accountShares;
        // é‡Šæ”¾å¢åŠ å—ç›Šäººäº‹ä»¶
        emit PayeeAdded(_account, _accountShares);
    }
```

å­¦ä¹ å®Œåˆ†è´¦åï¼Œå¯¹åˆ†è´¦åˆçº¦å°è¯•è¿›è¡Œå…·ä½“å®ç°ã€‚

ç„¶åå­¦ä¹ äº†ä»£å¸çš„çº¿æ€§é‡Šæ”¾åˆçº¦ï¼š

çº¿æ€§é‡Šæ”¾åˆçº¦ä¸­å…±æœ‰`3`ä¸ªå‡½æ•°ã€‚

- æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–å—ç›Šäººåœ°å€ï¼Œå½’å±æœŸ(ç§’), èµ·å§‹æ—¶é—´æˆ³ã€‚å‚æ•°ä¸ºå—ç›Šäººåœ°å€`beneficiaryAddress`å’Œå½’å±æœŸ`durationSeconds`ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œèµ·å§‹æ—¶é—´æˆ³ç”¨çš„éƒ¨ç½²æ—¶çš„åŒºå—é“¾æ—¶é—´æˆ³`block.timestamp`ã€‚

- `release()`ï¼šæå–ä»£å¸å‡½æ•°ï¼Œå°†å·²é‡Šæ”¾çš„ä»£å¸è½¬è´¦ç»™å—ç›Šäººã€‚è°ƒç”¨äº†`vestedAmount()`å‡½æ•°è®¡ç®—å¯æå–çš„ä»£å¸æ•°é‡ï¼Œé‡Šæ”¾`ERC20Released`äº‹ä»¶ï¼Œç„¶åå°†ä»£å¸`transfer`ç»™å—ç›Šäººã€‚å‚æ•°ä¸ºä»£å¸åœ°å€`token`ã€‚

- `vestedAmount()`ï¼šæ ¹æ®çº¿æ€§é‡Šæ”¾å…¬å¼ï¼ŒæŸ¥è¯¢å·²ç»é‡Šæ”¾çš„ä»£å¸æ•°é‡ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡ä¿®æ”¹è¿™ä¸ªå‡½æ•°ï¼Œè‡ªå®šä¹‰é‡Šæ”¾æ–¹å¼ã€‚å‚æ•°ä¸ºä»£å¸åœ°å€`token`å’ŒæŸ¥è¯¢çš„æ—¶é—´æˆ³`timestamp`ã€‚

  ```
      /**
       * @dev åˆå§‹åŒ–å—ç›Šäººåœ°å€ï¼Œé‡Šæ”¾å‘¨æœŸ(ç§’), èµ·å§‹æ—¶é—´æˆ³(å½“å‰åŒºå—é“¾æ—¶é—´æˆ³)
       */
      constructor(
          address beneficiaryAddress,
          uint256 durationSeconds
      ) {
          require(beneficiaryAddress != address(0), "VestingWallet: beneficiary is zero address");
          beneficiary = beneficiaryAddress;
          start = block.timestamp;
          duration = durationSeconds;
      }

      /**
       * @dev å—ç›Šäººæå–å·²é‡Šæ”¾çš„ä»£å¸ã€‚
       * è°ƒç”¨vestedAmount()å‡½æ•°è®¡ç®—å¯æå–çš„ä»£å¸æ•°é‡ï¼Œç„¶åtransferç»™å—ç›Šäººã€‚
       * é‡Šæ”¾ {ERC20Released} äº‹ä»¶.
       */
      function release(address token) public {
          // è°ƒç”¨vestedAmount()å‡½æ•°è®¡ç®—å¯æå–çš„ä»£å¸æ•°é‡
          uint256 releasable = vestedAmount(token, uint256(block.timestamp)) - erc20Released[token];
          // æ›´æ–°å·²é‡Šæ”¾ä»£å¸æ•°é‡   
          erc20Released[token] += releasable; 
          // è½¬ä»£å¸ç»™å—ç›Šäºº
          emit ERC20Released(token, releasable);
          IERC20(token).transfer(beneficiary, releasable);
      }

      /**
       * @dev æ ¹æ®çº¿æ€§é‡Šæ”¾å…¬å¼ï¼Œè®¡ç®—å·²ç»é‡Šæ”¾çš„æ•°é‡ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡ä¿®æ”¹è¿™ä¸ªå‡½æ•°ï¼Œè‡ªå®šä¹‰é‡Šæ”¾æ–¹å¼ã€‚
       * @param token: ä»£å¸åœ°å€
       * @param timestamp: æŸ¥è¯¢çš„æ—¶é—´æˆ³
       */
      function vestedAmount(address token, uint256 timestamp) public view returns (uint256) {
          // åˆçº¦é‡Œæ€»å…±æ”¶åˆ°äº†å¤šå°‘ä»£å¸ï¼ˆå½“å‰ä½™é¢ + å·²ç»æå–ï¼‰
          uint256 totalAllocation = IERC20(token).balanceOf(address(this)) + erc20Released[token];
          // æ ¹æ®çº¿æ€§é‡Šæ”¾å…¬å¼ï¼Œè®¡ç®—å·²ç»é‡Šæ”¾çš„æ•°é‡
          if (timestamp < start) {
              return 0;
          } else if (timestamp > start + duration) {
              return totalAllocation;
          } else {
              return (totalAllocation * (timestamp - start)) / duration;
          }
      }
  ```

  â€‹

### 07.17

XXX
<!-- Content_END -->